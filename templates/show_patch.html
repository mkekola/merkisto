{% extends "layout.html" %} {% block title %} {{ patch.title }} {% endblock %} {% block
content %}
<main class="wrap">
  <section class="panel stack">
<h2>{{ patch.title }}</h2>
{% if session.user_id == patch.user_id %}
<nav class="patch-actions">
  <a type="button" href="/edit_patch/{{ patch.id }}">Muokkaa</a>
  <a type="button" href="/remove_patch/{{ patch.id }}">Poista</a>
  <a type="button" href="/images/{{ patch.id }}">Kuvat</a>
</nav>
{% endif %} 

{% if images %}
<div class="gallery">
{% for image in images %}
<img src="/image/{{ image.id }}" alt="Patch Image" />
{% endfor %}
</div>
{% endif %}

<dl class="meta-grid">
<div><strong>Lisääjä:</strong> <a class="user-link" href="/user/{{ patch.user_id }}">{{ patch.username }}</a></div>
<div><strong>Kuvaus:</strong> {{ patch.description }}</div>
<div><strong>Tekniikka:</strong> {{ patch.technique }}</div>
  {% if classes %} {% for class in classes %}
  <li class="class-list"><strong>{{ class.title}}:</strong> {{ class.value }}</li>
  {% endfor %}
{% endif %}
</dl>
<h3>Kommentit</h3>
{% if session.user_id %}
<form action="/create_comment/{{ patch.id }}" method="post">
  <textarea
    name="comment"
    rows="4"
    cols="50"
    maxlength="300"
    required
  ></textarea>
  <p>
    <input type="hidden" name="patch_id" value="{{ patch.id }}" />
    <input type="submit" value="Lisää kommentti" />
  </p>
</form>
{% else %}
<p><a href="/login">Kirjaudu sisään</a> lisätäksesi kommentin.</p>
{% endif %}
<ul class="patch-list">
  {% for comment in comments %}
  <li class="patch-item comments">
    {{ comment.content }}
    <a class="user-link" href="/user/{{ comment.user_id }}">~ {{ comment.username }}</a>
  </li>
  {% endfor %}
</ul>
<input type="submit" value="Takaisin" onclick="window.history.back()" />
  </section>
</main>
{% endblock %}

